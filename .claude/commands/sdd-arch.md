---
description: Phase 2 - åˆ†æéœ€æ±‚ä¸¦è¦åŠƒåŠŸèƒ½æ¶æ§‹ï¼Œæ ¹æ“šå°ˆæ¡ˆä¸Šä¸‹æ–‡è‡ªå‹•é©æ‡‰ï¼Œè¼¸å‡º Markdown æ–‡ä»¶åˆ° docs/features/{feature_name}/
---

# SDD Phase 2: æ¶æ§‹è¨­è¨ˆï¼ˆéª¨æ¶ï¼‰

**è§’è‰²ï¼š** ç³»çµ±æ¶æ§‹å¸«

**ç›®æ¨™ï¼š** åˆ†æéšæ®µ 1 çš„ Gherkin è¦æ ¼ï¼Œè¨­è¨ˆåŠŸèƒ½æ¶æ§‹ï¼Œè¦åŠƒæ‰€éœ€çš„æœå‹™ä»‹é¢èˆ‡è³‡æ–™æ¨¡å‹ï¼Œä¸¦ä»¥ä¸­æ–‡ Markdown æ–‡ä»¶å‘ˆç¾ã€‚

**æ ¸å¿ƒåŸå‰‡ï¼š**
- âœ… **èªè¨€ç„¡é—œ**ï¼šä¸é è¨­ç‰¹å®šç¨‹å¼èªè¨€ï¼Œæ ¹æ“šå°ˆæ¡ˆä¸Šä¸‹æ–‡åˆ¤æ–·
- âœ… **å°ˆæ¡ˆæ„ŸçŸ¥**ï¼šæƒæç¾æœ‰å°ˆæ¡ˆçµæ§‹ã€æŠ€è¡“æ£§ã€æ¶æ§‹æ¨¡å¼
- âœ… **æ¶æ§‹ä¸€è‡´**ï¼šéµå¾ªå°ˆæ¡ˆæ—¢æœ‰çš„è¨­è¨ˆæ¨¡å¼å’Œå‘½åæ…£ä¾‹
- âœ… **éˆæ´»é©æ‡‰**ï¼šæ”¯æ´ prompt æŒ‡å®šæˆ–è‡ªå‹•åµæ¸¬æ¶æ§‹é¢¨æ ¼

## è¼¸å…¥

Gherkin è¦æ ¼æª”æ¡ˆï¼š{{prompt}}

## æ‚¨çš„è·è²¬

- æ‚¨æ˜¯æ¶æ§‹å¸«ã€‚é–±è®€ä¸¦åˆ†æ Gherkin è¦æ ¼ã€‚
- **é¦–å…ˆæƒæå°ˆæ¡ˆä¸Šä¸‹æ–‡**ï¼Œç†è§£ç¾æœ‰æŠ€è¡“æ£§å’Œæ¶æ§‹æ¨¡å¼ã€‚
- å®šç¾©åŠŸèƒ½æ¶æ§‹ï¼šæœå‹™ä»‹é¢èˆ‡è³‡æ–™æ¨¡å‹ã€‚
- ä¸åŒ…å«æ¥­å‹™é‚è¼¯å¯¦ä½œï¼Œåªåšæ¶æ§‹è¦åŠƒã€‚
- å¾ Gherkin æå–åè© â†’ è³‡æ–™æ¨¡å‹
- å¾ Gherkin æå–å‹•è© â†’ æœå‹™ä»‹é¢
- **éµå¾ªå°ˆæ¡ˆæ—¢æœ‰æ¶æ§‹é¢¨æ ¼**ï¼ˆè‹¥å°ˆæ¡ˆç‚ºæ–°å»ºï¼Œå‰‡ä½¿ç”¨æœ€ä½³å¯¦è¸ï¼‰
- **è¼¸å‡ºç‚ºä¸­æ–‡çš„çµæ§‹åŒ– Markdown æ–‡ä»¶**

## æ­¥é©Ÿ 1ï¼šå°ˆæ¡ˆä¸Šä¸‹æ–‡åˆ†æ

**åœ¨é–‹å§‹æ¶æ§‹è¨­è¨ˆå‰ï¼Œå¿…é ˆå…ˆåŸ·è¡Œä»¥ä¸‹åˆ†æï¼š**

### 1.1 åµæ¸¬å°ˆæ¡ˆæŠ€è¡“æ£§

æƒæå°ˆæ¡ˆæ ¹ç›®éŒ„ï¼Œæª¢æŸ¥ä»¥ä¸‹æª”æ¡ˆä»¥åˆ¤æ–·æŠ€è¡“æ£§ï¼š

| æª”æ¡ˆ | åˆ¤æ–·çµæœ |
|---|---|
| `package.json` | Node.js/TypeScript/JavaScript å°ˆæ¡ˆ |
| `requirements.txt`, `pyproject.toml`, `setup.py` | Python å°ˆæ¡ˆ |
| `go.mod` | Go å°ˆæ¡ˆ |
| `pom.xml`, `build.gradle` | Java å°ˆæ¡ˆ |
| `Cargo.toml` | Rust å°ˆæ¡ˆ |
| `*.csproj`, `*.sln` | C#/.NET å°ˆæ¡ˆ |
| `composer.json` | PHP å°ˆæ¡ˆ |
| `Gemfile` | Ruby å°ˆæ¡ˆ |

**åˆ†æå…§å®¹ï¼š**
```bash
# æª¢æŸ¥ä¸»è¦ä¾è³´å’Œæ¡†æ¶
- å‰ç«¯æ¡†æ¶ï¼šReact, Vue, Angular, Svelte
- å¾Œç«¯æ¡†æ¶ï¼šExpress, NestJS, FastAPI, Django, Spring Boot, Gin
- è³‡æ–™åº«ï¼šPostgreSQL, MySQL, MongoDB, Redis
- ORM/ODMï¼šTypeORM, Prisma, SQLAlchemy, Mongoose
```

### 1.2 åˆ†æç¾æœ‰æ¶æ§‹æ¨¡å¼

æƒæå°ˆæ¡ˆç›®éŒ„çµæ§‹ï¼Œè­˜åˆ¥æ¶æ§‹æ¨¡å¼ï¼š

**å¸¸è¦‹æ¨¡å¼åµæ¸¬ï¼š**
```
src/
â”œâ”€â”€ controllers/     â†’ MVC æ¨¡å¼
â”œâ”€â”€ services/        â†’ æœå‹™å±¤æ¶æ§‹
â”œâ”€â”€ repositories/    â†’ Repository æ¨¡å¼
â”œâ”€â”€ models/          â†’ è³‡æ–™æ¨¡å‹
â”œâ”€â”€ entities/        â†’ DDDï¼ˆDomain-Driven Designï¼‰
â”œâ”€â”€ domain/          â†’ Clean Architecture
â”œâ”€â”€ use-cases/       â†’ Use Case é©…å‹•
â”œâ”€â”€ handlers/        â†’ Handler æ¨¡å¼ï¼ˆå¸¸è¦‹æ–¼ Goï¼‰
â”œâ”€â”€ routes/          â†’ è·¯ç”±é©…å‹•æ¶æ§‹
â””â”€â”€ api/             â†’ API å„ªå…ˆè¨­è¨ˆ
```

**æ¶æ§‹é¢¨æ ¼åˆ¤æ–·ï¼š**
- åˆ†å±¤æ¶æ§‹ï¼ˆLayeredï¼‰
- å…­è§’æ¶æ§‹ï¼ˆHexagonalï¼‰
- æ¸…æ½”æ¶æ§‹ï¼ˆClean Architectureï¼‰
- DDDï¼ˆDomain-Driven Designï¼‰
- CQRSï¼ˆCommand Query Responsibility Segregationï¼‰
- å¾®æœå‹™æ¶æ§‹ï¼ˆMicroservicesï¼‰
- Serverless

### 1.3 è­˜åˆ¥å‘½åæ…£ä¾‹

åˆ†ææ—¢æœ‰ç¨‹å¼ç¢¼çš„å‘½åé¢¨æ ¼ï¼š

| èªè¨€ | å¸¸è¦‹æ…£ä¾‹ |
|---|---|
| TypeScript/JavaScript | camelCase, PascalCase (classes) |
| Python | snake_case, PascalCase (classes) |
| Go | PascalCase (exported), camelCase (private) |
| Java | camelCase, PascalCase (classes) |
| C# | PascalCase |
| Rust | snake_case, PascalCase (types) |

**æª”æ¡ˆå‘½åï¼š**
```bash
# ç¯„ä¾‹æƒæ
find src -name "*.service.*" -o -name "*Service.*"
find src -name "*.repository.*" -o -name "*Repository.*"
find src -name "*.controller.*" -o -name "*Controller.*"
```

### 1.4 Prompt è¦†è“‹æ©Ÿåˆ¶

**ä½¿ç”¨è€…å¯åœ¨ prompt ä¸­æŒ‡å®šï¼š**
```
æ¶æ§‹é¢¨æ ¼ï¼šClean Architecture
ç¨‹å¼èªè¨€ï¼šTypeScript
æ¡†æ¶ï¼šNestJS
è³‡æ–™åº«ï¼šPostgreSQL + Prisma ORM
```

**å„ªå…ˆé †åºï¼š**
1. ğŸ¥‡ Prompt æ˜ç¢ºæŒ‡å®š â†’ ç›´æ¥ä½¿ç”¨
2. ğŸ¥ˆ å°ˆæ¡ˆæ—¢æœ‰æ¶æ§‹ â†’ éµå¾ªç¾æœ‰æ¨¡å¼
3. ğŸ¥‰ æ–°å°ˆæ¡ˆç„¡ä¸Šä¸‹æ–‡ â†’ ä½¿ç”¨è©²èªè¨€æœ€ä½³å¯¦è¸

## æ­¥é©Ÿ 2ï¼šåŠŸèƒ½åç¨±åµæ¸¬

åœ¨é–‹å§‹å‰ï¼š
1. å¾ Gherkin æª”æ¡ˆè·¯å¾‘æå–åŠŸèƒ½åç¨±ï¼ˆä¾‹å¦‚ï¼š`features/user_auth.feature` â†’ `user_auth`ï¼‰
2. å¦‚æœç„¡æ³•ç¢ºå®šï¼Œä½¿ç”¨ Gherkin ä¸­çš„ Feature åç¨±
3. è½‰æ›ç‚ºå°ˆæ¡ˆæ—¢æœ‰çš„å‘½åæ…£ä¾‹ï¼ˆcamelCase, snake_case, PascalCase ç­‰ï¼‰

## æ­¥é©Ÿ 3ï¼šæ¶æ§‹è¨­è¨ˆä»»å‹™

### 3.1 åè©åˆ†æ - æå–å¯¦é«”ä¸¦è¨­è¨ˆè³‡æ–™æ¨¡å‹

- è­˜åˆ¥ Gherkin æƒ…å¢ƒä¸­çš„æ‰€æœ‰åè©
- åˆ—å‡ºéœ€è¦çš„è³‡æ–™æ¨¡å‹åŠå…¶æ¬„ä½
- åˆ—å‡ºåˆ—èˆ‰/å¸¸æ•¸å€¼
- **éµå¾ªå°ˆæ¡ˆæ—¢æœ‰çš„è³‡æ–™æ¨¡å‹è¨­è¨ˆæ¨¡å¼**

### 3.2 å‹•è©åˆ†æ - æå–å‹•ä½œä¸¦è¨­è¨ˆæœå‹™ä»‹é¢

- è­˜åˆ¥ Gherkin æƒ…å¢ƒä¸­çš„æ‰€æœ‰å‹•ä½œ/å‹•è©
- åˆ—å‡ºéœ€è¦çš„æœå‹™ä»‹é¢
- å®šç¾©æ–¹æ³•ç°½åèˆ‡åƒæ•¸
- è¨»æ˜å°æ‡‰çš„ Gherkin æƒ…å¢ƒ
- **éµå¾ªå°ˆæ¡ˆæ—¢æœ‰çš„æœå‹™ä»‹é¢è¨­è¨ˆæ¨¡å¼**

### 3.3 æ¶æ§‹æ±ºç­– - èªªæ˜è¨­è¨ˆè€ƒé‡

- ç‚ºä»€éº¼éœ€è¦é€™äº›ä»‹é¢ï¼Ÿ
- ç‚ºä»€éº¼è¨­è¨ˆé€™äº›è³‡æ–™æ¨¡å‹ï¼Ÿ
- æœ‰å“ªäº›æŠ€è¡“è€ƒé‡ï¼Ÿ
- **å¦‚ä½•èˆ‡ç¾æœ‰æ¶æ§‹æ•´åˆï¼Ÿ**
- **éµå¾ªäº†å“ªäº›å°ˆæ¡ˆæ—¢æœ‰çš„è¨­è¨ˆåŸå‰‡ï¼Ÿ**

## è¼¸å‡ºæ ¼å¼

### æ¶æ§‹è¨­è¨ˆæ–‡ä»¶æ ¼å¼ï¼ˆä¸­æ–‡ï¼‰

æª”æ¡ˆä½ç½®ï¼š`docs/features/{feature_name}/architecture.md`

**é‡è¦ï¼šæ–‡ä»¶å¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡æ’°å¯«**

### æ–‡ä»¶çµæ§‹

```markdown
# {åŠŸèƒ½åç¨±} - æ¶æ§‹è¨­è¨ˆ

> ä¾†æºï¼šfeatures/{feature_name}.feature
> 
> å»ºç«‹æ—¥æœŸï¼š{æ—¥æœŸ}

## 0. å°ˆæ¡ˆä¸Šä¸‹æ–‡

### æŠ€è¡“æ£§è³‡è¨Š
- **ç¨‹å¼èªè¨€**ï¼š{åµæ¸¬æˆ–æŒ‡å®šçš„èªè¨€}
- **æ¡†æ¶**ï¼š{åµæ¸¬æˆ–æŒ‡å®šçš„æ¡†æ¶}
- **è³‡æ–™åº«**ï¼š{åµæ¸¬æˆ–æŒ‡å®šçš„è³‡æ–™åº«}
- **ORM/ODM**ï¼š{åµæ¸¬æˆ–æŒ‡å®šçš„ ORM}
- **æ¶æ§‹æ¨¡å¼**ï¼š{åµæ¸¬æˆ–æŒ‡å®šçš„æ¶æ§‹æ¨¡å¼}

### ç¾æœ‰å°ˆæ¡ˆçµæ§‹
```
{é¡¯ç¤ºæƒæåˆ°çš„å°ˆæ¡ˆç›®éŒ„çµæ§‹}
```

### å‘½åæ…£ä¾‹
- æª”æ¡ˆå‘½åï¼š{snake_case / camelCase / PascalCase}
- é¡åˆ¥å‘½åï¼š{PascalCase / camelCase}
- æ–¹æ³•å‘½åï¼š{camelCase / snake_case}
- å¸¸æ•¸å‘½åï¼š{UPPER_CASE / camelCase}

### è¨­è¨ˆæ¨¡å¼åµæ¸¬
- [ ] Repository Pattern
- [ ] Service Layer
- [ ] MVC
- [ ] Clean Architecture
- [ ] DDD
- [ ] CQRS
- [ ] {å…¶ä»–åµæ¸¬åˆ°çš„æ¨¡å¼}

## 1. åŠŸèƒ½æ¦‚è¿°

æœ¬åŠŸèƒ½æä¾› {åŠŸèƒ½ç°¡è¿°}ã€‚

**æ ¸å¿ƒéœ€æ±‚ï¼š**
- {éœ€æ±‚ 1}
- {éœ€æ±‚ 2}
- {éœ€æ±‚ 3}

## 2. è³‡æ–™æ¨¡å‹è¨­è¨ˆ

### 2.1 åˆ—èˆ‰èˆ‡å¸¸æ•¸

#### {EnumName}ï¼ˆ{æè¿°}ï¼‰
**ä¾†æºæƒ…å¢ƒï¼š** "{Gherkin èªå¥}" (ç¬¬ X è¡Œ)

| å€¼ | èªªæ˜ | ç”¨é€” |
|---|---|---|
| {VALUE_1} | {èªªæ˜} | {ç”¨é€”} |
| {VALUE_2} | {èªªæ˜} | {ç”¨é€”} |

**å¯¦ä½œå»ºè­°ï¼ˆåŸºæ–¼ {èªè¨€}ï¼‰ï¼š**
```{language}
{èªè¨€ç‰¹å®šçš„åˆ—èˆ‰å¯¦ä½œç¯„ä¾‹}
```

### 2.2 æ ¸å¿ƒå¯¦é«”

#### {EntityName}ï¼ˆ{æè¿°}ï¼‰
**ä¾†æºæƒ…å¢ƒï¼š** "{Gherkin èªå¥}" (ç¬¬ X è¡Œ)

| æ¬„ä½åç¨± | è³‡æ–™å‹åˆ¥ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|---|---|---|---|---|
| {field1} | {type} | âœ…/- | {default} | {èªªæ˜} |
| {field2} | {type} | âœ…/- | {default} | {èªªæ˜} |

**è¨­è¨ˆè€ƒé‡ï¼š**
- {è€ƒé‡ 1}
- {è€ƒé‡ 2}

**è³‡æ–™åº«å°æ‡‰ï¼ˆåŸºæ–¼ {database}ï¼‰ï¼š**
```sql
{SQL Schema æˆ– ORM å®šç¾©}
```

**å¯¦ä½œç¯„ä¾‹ï¼ˆåŸºæ–¼ {language} + {orm}ï¼‰ï¼š**
```{language}
{èªè¨€å’Œ ORM ç‰¹å®šçš„æ¨¡å‹å®šç¾©}
```

## 3. æœå‹™ä»‹é¢è¨­è¨ˆ

### 3.1 {ServiceName}ï¼ˆ{æœå‹™æè¿°}ï¼‰

**æœå‹™è·è²¬ï¼š**
{æœå‹™çš„æ ¸å¿ƒè·è²¬æè¿°}

**åœ¨å°ˆæ¡ˆæ¶æ§‹ä¸­çš„ä½ç½®ï¼š**
```
{é¡¯ç¤ºæ­¤æœå‹™åœ¨å°ˆæ¡ˆæ¶æ§‹ä¸­çš„ä½ç½®}
src/{path}/{ServiceName}.{ext}
```

#### æ–¹æ³•ï¼š{methodName}()

**ä¾†æºæƒ…å¢ƒï¼š**
- "{Gherkin èªå¥}" (ç¬¬ X-Y è¡Œ)

**æ–¹æ³•ç°½åï¼ˆåŸºæ–¼ {language}ï¼‰ï¼š**
```{language}
{èªè¨€ç‰¹å®šçš„æ–¹æ³•ç°½å}
```

**è¼¸å…¥åƒæ•¸ï¼š**

| åƒæ•¸åç¨± | å‹åˆ¥ | èªªæ˜ |
|---|---|---|
| {param1} | {type} | {èªªæ˜} |
| {param2} | {type} | {èªªæ˜} |

**å›å‚³å€¼ï¼š**

| å‹åˆ¥ | èªªæ˜ |
|---|---|
| {returnType} | {èªªæ˜} |

**æ¥­å‹™è¦å‰‡ï¼š**
1. {è¦å‰‡ 1}
2. {è¦å‰‡ 2}

**ç•°å¸¸è™•ç†ï¼ˆåŸºæ–¼ {language}ï¼‰ï¼š**
```{language}
{èªè¨€ç‰¹å®šçš„ç•°å¸¸è™•ç†ç¯„ä¾‹}
```

**èˆ‡ç¾æœ‰æœå‹™çš„æ•´åˆï¼š**
- ä¾è³´æœå‹™ï¼š{ä¾è³´çš„ç¾æœ‰æœå‹™}
- è¢«ä¾è³´æ–¼ï¼š{å¯èƒ½ä¾è³´æ­¤æœå‹™çš„å…¶ä»–æœå‹™}

## 4. æ¶æ§‹æ±ºç­–

### 4.1 ç‚ºä»€éº¼é¸æ“‡æ­¤æ¶æ§‹æ¨¡å¼ï¼Ÿ

**åŸºæ–¼å°ˆæ¡ˆåˆ†æï¼š**
- âœ… å°ˆæ¡ˆç¾æœ‰æ¶æ§‹ï¼š{åµæ¸¬åˆ°çš„æ¶æ§‹}
- âœ… ä¿æŒä¸€è‡´æ€§ï¼š{èªªæ˜å¦‚ä½•ä¿æŒä¸€è‡´}
- âœ… æ•´åˆè€ƒé‡ï¼š{èˆ‡ç¾æœ‰å…ƒä»¶çš„æ•´åˆæ–¹å¼}

### 4.2 è³‡æ–™æ¨¡å‹è¨­è¨ˆç†ç”±

**è¨­è¨ˆç†ç”±ï¼š**
- âœ… {ç†ç”± 1}
- âœ… {ç†ç”± 2}

**èˆ‡ç¾æœ‰æ¨¡å‹çš„é—œè¯ï¼š**
- é—œè¯æ¨¡å‹ï¼š{ç¾æœ‰çš„ç›¸é—œæ¨¡å‹}
- é—œè¯æ–¹å¼ï¼š{One-to-Many, Many-to-Many ç­‰}

### 4.3 æŠ€è¡“è€ƒé‡

#### å‹åˆ¥å®šç¾©ï¼ˆ{language}ï¼‰
{èªè¨€ç‰¹å®šçš„å‹åˆ¥å®šç¾©å»ºè­°}

#### è³‡æ–™é©—è­‰ï¼ˆ{framework}ï¼‰
{æ¡†æ¶ç‰¹å®šçš„é©—è­‰å»ºè­°}

#### éŒ¯èª¤è™•ç†ï¼ˆ{language}ï¼‰
{èªè¨€ç‰¹å®šçš„éŒ¯èª¤è™•ç†æ¨¡å¼}

#### æ•ˆèƒ½è€ƒé‡
- {æ•ˆèƒ½è€ƒé‡ 1}
- {æ•ˆèƒ½è€ƒé‡ 2}

#### æ“´å±•æ€§è¨­è¨ˆ
- {æ“´å±•æ€§è€ƒé‡ 1}
- {æ“´å±•æ€§è€ƒé‡ 2}

## 5. æƒ…å¢ƒå°æ‡‰é—œä¿‚

| Gherkin æƒ…å¢ƒ | è¡Œæ•¸ | ç›¸é—œè³‡æ–™æ¨¡å‹ | ç›¸é—œæœå‹™æ–¹æ³• | é©—è­‰é‡é» |
|---|---|---|---|---|
| {æƒ…å¢ƒæè¿°} | {è¡Œè™Ÿ} | {Model} | {method()} | {é©—è­‰é‡é»} |

## 6. æª”æ¡ˆçµæ§‹è¦åŠƒ

**åŸºæ–¼å°ˆæ¡ˆæ—¢æœ‰çµæ§‹ï¼Œæ–°å¢ä»¥ä¸‹æª”æ¡ˆï¼š**

```
{project_root}/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ {æ¨¡å‹ç›®éŒ„}/
â”‚   â”‚   â””â”€â”€ {FeatureName}Model.{ext}       # è³‡æ–™æ¨¡å‹
â”‚   â”œâ”€â”€ {æœå‹™ç›®éŒ„}/
â”‚   â”‚   â””â”€â”€ {FeatureName}Service.{ext}     # æœå‹™å¯¦ä½œ
â”‚   â”œâ”€â”€ {ä»‹é¢ç›®éŒ„}/                         # (å¦‚é©ç”¨)
â”‚   â”‚   â””â”€â”€ I{FeatureName}Service.{ext}    # æœå‹™ä»‹é¢
â”‚   â””â”€â”€ {å…¶ä»–ç›¸é—œç›®éŒ„}/
â”‚       â””â”€â”€ {ç›¸é—œæª”æ¡ˆ}
â”œâ”€â”€ tests/                                  # æ¸¬è©¦æª”æ¡ˆ
â”‚   â””â”€â”€ {FeatureName}.test.{ext}
â””â”€â”€ docs/
    â””â”€â”€ features/{feature_name}/
        â””â”€â”€ architecture.md                 # æœ¬æ–‡ä»¶
```

## 7. ä¸‹ä¸€æ­¥è¡Œå‹•

### éšæ®µ 3ï¼šç¨‹å¼ç¢¼å¯¦ä½œ

**éœ€è¦å¯¦ä½œçš„å…ƒä»¶ï¼ˆåŸºæ–¼ {language} + {framework}ï¼‰ï¼š**

1. âœ… å®šç¾©åˆ—èˆ‰/å¸¸æ•¸
   - æª”æ¡ˆï¼š`{path}/{EnumName}.{ext}`
   - ç¯„ä¾‹ï¼š{ç°¡çŸ­ç¨‹å¼ç¢¼ç¯„ä¾‹}

2. âœ… å»ºç«‹è³‡æ–™æ¨¡å‹
   - æª”æ¡ˆï¼š`{path}/{ModelName}.{ext}`
   - ç¯„ä¾‹ï¼š{ç°¡çŸ­ç¨‹å¼ç¢¼ç¯„ä¾‹}

3. âœ… å¯¦ä½œæœå‹™ä»‹é¢/é¡åˆ¥
   - æª”æ¡ˆï¼š`{path}/{ServiceName}.{ext}`
   - ç¯„ä¾‹ï¼š{ç°¡çŸ­ç¨‹å¼ç¢¼ç¯„ä¾‹}

4. âœ… æ•´åˆç¾æœ‰æ¶æ§‹
   - éœ€è¦ä¿®æ”¹çš„æª”æ¡ˆï¼š{åˆ—å‡ºéœ€è¦èª¿æ•´çš„ç¾æœ‰æª”æ¡ˆ}
   - æ•´åˆæ–¹å¼ï¼š{èªªæ˜æ•´åˆæ­¥é©Ÿ}

5. âœ… æ’°å¯«å–®å…ƒæ¸¬è©¦
   - æ¸¬è©¦æ¡†æ¶ï¼š{åµæ¸¬åˆ°çš„æ¸¬è©¦æ¡†æ¶}
   - æ¸¬è©¦æª”æ¡ˆï¼š`{path}/{FeatureName}.test.{ext}`

### å¯¦ä½œå„ªå…ˆé †åº

1. **ç¬¬ä¸€éšæ®µ**ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
   - å¯¦ä½œåŸºæœ¬è³‡æ–™æ¨¡å‹
   - å¯¦ä½œæ ¸å¿ƒæœå‹™æ–¹æ³•
   
2. **ç¬¬äºŒéšæ®µ**ï¼ˆå®Œå–„åŠŸèƒ½ï¼‰
   - åŠ å…¥éŒ¯èª¤è™•ç†
   - æ–°å¢è¼¸å…¥é©—è­‰
   
3. **ç¬¬ä¸‰éšæ®µ**ï¼ˆå“è³ªæå‡ï¼‰
   - æ’°å¯«å–®å…ƒæ¸¬è©¦
   - åŠ å…¥æ—¥èªŒè¨˜éŒ„
   - æ•ˆèƒ½å„ªåŒ–
   - æ•´åˆç¾æœ‰ç³»çµ±

### æŠ€è¡“å‚µå‹™èˆ‡é¢¨éšª

**éœ€è¦æ³¨æ„çš„æŠ€è¡“å‚µå‹™ï¼š**
- {å¯èƒ½çš„æŠ€è¡“å‚µå‹™}

**æ½›åœ¨é¢¨éšªï¼š**
- {é¢¨éšª 1}
- {é¢¨éšª 2}

**ç·©è§£ç­–ç•¥ï¼š**
- {ç­–ç•¥ 1}
- {ç­–ç•¥ 2}
```

## æ¶æ§‹è¨­è¨ˆåŸå‰‡

ç„¡è«–ä½¿ç”¨ä½•ç¨®ç¨‹å¼èªè¨€æˆ–æ¶æ§‹ï¼Œæ‚¨çš„æ¶æ§‹è¨­è¨ˆæ–‡ä»¶å¿…é ˆï¼š

1. **å¯è¿½æº¯æ€§**ï¼šæ¯å€‹æ¨¡å‹å’Œä»‹é¢éƒ½è¦è¨»æ˜ä¾†æºçš„ Gherkin æƒ…å¢ƒåŠè¡Œæ•¸
2. **å®Œæ•´æ€§**ï¼šæ‰€æœ‰åè© â†’ è³‡æ–™æ¨¡å‹ï¼Œæ‰€æœ‰å‹•è© â†’ æœå‹™ä»‹é¢
3. **æ¸…æ™°æ€§**ï¼šä½¿ç”¨è¡¨æ ¼å’Œçµæ§‹åŒ–æ ¼å¼å‘ˆç¾ï¼Œæ˜“æ–¼é–±è®€
4. **æ±ºç­–é€æ˜**ï¼šè©³ç´°èªªæ˜ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼Œæä¾›è¨­è¨ˆç†ç”±
5. **æ–‡ä»¶åŒ–**ï¼šé€£çµåˆ°å…·é«”çš„ Gherkin è¡Œæ•¸ï¼Œå»ºç«‹å®Œæ•´çš„è¿½è¹¤éˆ
6. **ä¸­æ–‡æ’°å¯«**ï¼šæ‰€æœ‰æ–‡ä»¶å…§å®¹å¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡
7. **å°ˆæ¡ˆæ„ŸçŸ¥**ï¼šæ˜ç¢ºèªªæ˜åµæ¸¬åˆ°çš„å°ˆæ¡ˆä¸Šä¸‹æ–‡å’ŒæŠ€è¡“æ£§
8. **æ¶æ§‹ä¸€è‡´**ï¼šéµå¾ªå°ˆæ¡ˆæ—¢æœ‰çš„æ¶æ§‹æ¨¡å¼å’Œè¨­è¨ˆåŸå‰‡
9. **èªè¨€é©é…**ï¼šç¨‹å¼ç¢¼ç¯„ä¾‹ä½¿ç”¨å°ˆæ¡ˆå¯¦éš›ä½¿ç”¨çš„èªè¨€å’Œæ¡†æ¶

## èªè¨€èˆ‡æ¡†æ¶ç‰¹å®šç¯„ä¾‹

### TypeScript + NestJS ç¯„ä¾‹

**è³‡æ–™æ¨¡å‹ï¼ˆEntityï¼‰ï¼š**
```typescript
import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm';

@Entity()
export class User {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column({ type: 'enum', enum: UserType })
  userType: UserType;

  @Column({ default: 0 })
  points: number;
}

export enum UserType {
  VIP = 'VIP',
  NORMAL = 'NORMAL',
}
```

**æœå‹™ä»‹é¢ï¼ˆServiceï¼‰ï¼š**
```typescript
@Injectable()
export class DiscountService {
  calculateDiscount(user: User, purchaseAmount: number): DiscountResult {
    // å¯¦ä½œé‚è¼¯
  }
}
```

### Python + FastAPI ç¯„ä¾‹

**è³‡æ–™æ¨¡å‹ï¼ˆPydanticï¼‰ï¼š**
```python
from enum import Enum
from pydantic import BaseModel

class UserType(str, Enum):
    VIP = "VIP"
    NORMAL = "NORMAL"

class User(BaseModel):
    id: str
    user_type: UserType
    points: int = 0
```

**æœå‹™ä»‹é¢ï¼ˆServiceï¼‰ï¼š**
```python
class DiscountService:
    def calculate_discount(
        self, user: User, purchase_amount: float
    ) -> DiscountResult:
        # å¯¦ä½œé‚è¼¯
        pass
```

### Go ç¯„ä¾‹

**è³‡æ–™æ¨¡å‹ï¼ˆStructï¼‰ï¼š**
```go
type UserType string

const (
    UserTypeVIP    UserType = "VIP"
    UserTypeNormal UserType = "NORMAL"
)

type User struct {
    ID       string   `json:"id"`
    UserType UserType `json:"user_type"`
    Points   int      `json:"points"`
}
```

**æœå‹™ä»‹é¢ï¼ˆInterfaceï¼‰ï¼š**
```go
type DiscountService interface {
    CalculateDiscount(user User, purchaseAmount float64) (DiscountResult, error)
}
```

## æ–‡ä»¶æ’°å¯«è¦æ±‚

**èªè¨€ï¼š** å¿…é ˆä½¿ç”¨ç¹é«”ä¸­æ–‡

**é¢¨æ ¼ï¼š**
- ä½¿ç”¨å°ˆæ¥­ä½†æ˜“æ‡‚çš„æŠ€è¡“ç”¨èª
- é¿å…éåº¦ç°¡åŒ–æˆ–éåº¦è¤‡é›œçš„æè¿°
- æä¾›å……åˆ†çš„ä¸Šä¸‹æ–‡å’Œèªªæ˜
- ä½¿ç”¨å…·é«”çš„ç¯„ä¾‹å’Œå ´æ™¯
- **ç¨‹å¼ç¢¼ç¯„ä¾‹å¿…é ˆç¬¦åˆå°ˆæ¡ˆå¯¦éš›ä½¿ç”¨çš„èªè¨€å’Œæ¡†æ¶**

**çµæ§‹ï¼š**
- éµå¾ªä¸Šè¿°æ–‡ä»¶çµæ§‹
- ä½¿ç”¨è¡¨æ ¼å‘ˆç¾çµæ§‹åŒ–è³‡è¨Š
- ä½¿ç”¨æ¸…å–®åˆ—èˆ‰é‡é»é …ç›®
- é©ç•¶ä½¿ç”¨ emoji å¢åŠ å¯è®€æ€§ï¼ˆâœ… âŒ ç­‰ï¼‰
- **ç¬¬ 0 ç« å¿…é ˆåŒ…å«å°ˆæ¡ˆä¸Šä¸‹æ–‡åˆ†æçµæœ**

## å“è³ªæª¢æŸ¥æ¸…å–®

å®Œæˆå‰è«‹ç¢ºä¿ï¼š
- [ ] **ä¸Šä¸‹æ–‡åˆ†æ**ï¼šå·²æƒæä¸¦è¨˜éŒ„å°ˆæ¡ˆæŠ€è¡“æ£§å’Œæ¶æ§‹
- [ ] **èªè¨€é©é…**ï¼šæ‰€æœ‰ç¨‹å¼ç¢¼ç¯„ä¾‹ä½¿ç”¨æ­£ç¢ºçš„èªè¨€å’Œæ¡†æ¶
- [ ] **æ¶æ§‹ä¸€è‡´**ï¼šè¨­è¨ˆéµå¾ªå°ˆæ¡ˆæ—¢æœ‰çš„æ¶æ§‹æ¨¡å¼
- [ ] **å‘½åä¸€è‡´**ï¼šå‘½åæ…£ä¾‹ç¬¦åˆå°ˆæ¡ˆæ—¢æœ‰é¢¨æ ¼
- [ ] **å®Œæ•´æ€§**ï¼šGherkin ä¸­çš„æ‰€æœ‰åè©éƒ½å·²åˆ—ç‚ºè³‡æ–™æ¨¡å‹
- [ ] **å®Œæ•´æ€§**ï¼šGherkin ä¸­çš„æ‰€æœ‰å‹•è©éƒ½å·²åˆ—ç‚ºæœå‹™ä»‹é¢æ–¹æ³•
- [ ] **æ˜ç¢ºæ€§**ï¼šæ‰€æœ‰åˆ†é¡å€¼éƒ½ä½¿ç”¨åˆ—èˆ‰/å¸¸æ•¸ä¸¦èªªæ˜ç”¨é€”
- [ ] **è¿½æº¯æ€§**ï¼šæ¯å€‹å…ƒç´ éƒ½è¨»æ˜ä¾†æº Gherkin æƒ…å¢ƒåŠè¡Œæ•¸
- [ ] **èªªæ˜æ€§**ï¼šåŒ…å«å®Œæ•´çš„æ¶æ§‹æ±ºç­–èªªæ˜ï¼ˆç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆï¼‰
- [ ] **æ•´åˆæ€§**ï¼šèªªæ˜å¦‚ä½•èˆ‡ç¾æœ‰ç³»çµ±æ•´åˆ
- [ ] **å°æ‡‰æ€§**ï¼šåŒ…å«æƒ…å¢ƒå°æ‡‰é—œä¿‚è¡¨
- [ ] **èªè¨€**ï¼šå…¨æ–‡ä½¿ç”¨ç¹é«”ä¸­æ–‡æ’°å¯«
- [ ] **æ ¼å¼**ï¼šä½¿ç”¨ Markdown è¡¨æ ¼å’Œæ¸…å–®æ ¼å¼
- [ ] **æª”æ¡ˆçµæ§‹**ï¼šè¦åŠƒäº†æ˜ç¢ºçš„æª”æ¡ˆçµæ§‹
- [ ] **å„²å­˜**ï¼šæª”æ¡ˆå·²å„²å­˜è‡³ `docs/features/{feature_name}/architecture.md`

## åŸ·è¡Œæµç¨‹

**åŸ·è¡Œæ­¤å‘½ä»¤æ™‚ï¼Œè«‹æŒ‰ç…§ä»¥ä¸‹é †åºï¼š**

### Phase 1: åˆ†æå°ˆæ¡ˆä¸Šä¸‹æ–‡ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰

```bash
# 1. æª¢æ¸¬æŠ€è¡“æ£§
ls -la | grep -E "package.json|requirements.txt|go.mod|pom.xml|Cargo.toml"

# 2. åˆ†æç›®éŒ„çµæ§‹
find src -type d -maxdepth 2 2>/dev/null || find . -type d -maxdepth 2

# 3. æª¢æŸ¥é…ç½®æª”æ¡ˆ
cat package.json 2>/dev/null | grep -E "dependencies|devDependencies" | head -20
cat tsconfig.json 2>/dev/null
cat pyproject.toml 2>/dev/null

# 4. æƒæç¾æœ‰ç¨‹å¼ç¢¼æ¨¡å¼
find . -name "*.service.*" -o -name "*Service.*" 2>/dev/null | head -5
find . -name "*.repository.*" -o -name "*Repository.*" 2>/dev/null | head -5
find . -name "*.controller.*" -o -name "*Controller.*" 2>/dev/null | head -5
```

### Phase 2: è®€å–ä¸¦åˆ†æ Gherkin

```bash
# è®€å–ä½¿ç”¨è€…æŒ‡å®šçš„ Gherkin æª”æ¡ˆ
cat {gherkin_file_path}
```

### Phase 3: ç”Ÿæˆæ¶æ§‹æ–‡ä»¶

åŸºæ–¼ Phase 1 çš„ä¸Šä¸‹æ–‡åˆ†æå’Œ Phase 2 çš„éœ€æ±‚åˆ†æï¼Œç”Ÿæˆæ¶æ§‹è¨­è¨ˆæ–‡ä»¶ã€‚

### Phase 4: å„²å­˜æ–‡ä»¶

```bash
# å»ºç«‹ç›®éŒ„
mkdir -p docs/features/{feature_name}

# å„²å­˜æ–‡ä»¶
# å°‡ç”Ÿæˆçš„ Markdown å„²å­˜è‡³ docs/features/{feature_name}/architecture.md
```

## è¼¸å‡ºä½ç½®

å°‡ Markdown æ–‡ä»¶å„²å­˜è‡³ï¼š
```
docs/features/{feature_name}/architecture.md
```

**è·¯å¾‘å°æ‡‰ç¯„ä¾‹ï¼š**
- Gherkin æª”æ¡ˆï¼š`features/user_auth.feature` 
- æ¶æ§‹æ–‡ä»¶ï¼š`docs/features/user_auth/architecture.md`

**ç›®éŒ„çµæ§‹ï¼š**
```
å°ˆæ¡ˆæ ¹ç›®éŒ„/
â”œâ”€â”€ features/
â”‚   â””â”€â”€ user_auth.feature          # Gherkin è¦æ ¼
â”œâ”€â”€ src/                            # æ—¢æœ‰å°ˆæ¡ˆç¨‹å¼ç¢¼
â”‚   â”œâ”€â”€ {åµæ¸¬åˆ°çš„ç›®éŒ„çµæ§‹}
â”‚   â””â”€â”€ ...
â””â”€â”€ docs/
    â””â”€â”€ features/
        â””â”€â”€ user_auth/
            â””â”€â”€ architecture.md    # æ¶æ§‹è¨­è¨ˆæ–‡ä»¶ï¼ˆä¸­æ–‡ï¼Œèªè¨€é©é…ï¼‰
```

## ä¸‹ä¸€æ­¥

å®Œæˆæ­¤éšæ®µå¾Œï¼š
1. è‡ªå‹•åˆ†æä¸¦è¨˜éŒ„å°ˆæ¡ˆä¸Šä¸‹æ–‡
2. å»ºç«‹ç›®éŒ„çµæ§‹ `docs/features/{feature_name}/`
3. å„²å­˜æ¶æ§‹æ–‡ä»¶åˆ°æŒ‡å®šä½ç½®ï¼ˆåŒ…å«å°ˆæ¡ˆä¸Šä¸‹æ–‡è³‡è¨Šï¼‰
4. é¡¯ç¤ºåµæ¸¬åˆ°çš„æŠ€è¡“æ£§å’Œæ¶æ§‹æ¨¡å¼
5. é¡¯ç¤ºæª”æ¡ˆè·¯å¾‘çµ¦ä½¿ç”¨è€…ç¢ºèª
6. ç­‰å¾…ä½¿ç”¨è€…å¯©æŸ¥æ¶æ§‹è¨­è¨ˆ
7. æˆ–æç¤ºä½¿ç”¨è€…å¯ç¹¼çºŒè‡³éšæ®µ 3ï¼š`/sdd-impl features/<feature>.feature`

---

**ç¾åœ¨è«‹åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š**
1. **æƒæå°ˆæ¡ˆä¸Šä¸‹æ–‡**ï¼ˆæŠ€è¡“æ£§ã€æ¶æ§‹æ¨¡å¼ã€å‘½åæ…£ä¾‹ï¼‰
2. è®€å–ä½¿ç”¨è€…æŒ‡å®šçš„ Gherkin æª”æ¡ˆ
3. åˆ†æå…¶ä¸­çš„åè©ï¼ˆå¯¦é«”ï¼‰å’Œå‹•è©ï¼ˆè¡Œç‚ºï¼‰
4. **ä¾ç…§åµæ¸¬åˆ°çš„å°ˆæ¡ˆä¸Šä¸‹æ–‡**ï¼Œç”Ÿæˆé©é…çš„æ¶æ§‹è¨­è¨ˆæ–‡ä»¶
5. å„²å­˜è‡³ `docs/features/{feature_name}/architecture.md`
6. å›å ±åµæ¸¬åˆ°çš„æŠ€è¡“æ£§å’Œæ¶æ§‹æ±ºç­–
